# Leetcode 704.二分查找

> [!TIP]
>
> - 把 704写熟练，要**熟悉 根据 左闭右开，左闭右闭 两种区间规则 写出来的二分法**。
>
> - 二分查找，核心：**循环不变量**（区间）

Leetcode 题目跳转： [704. 二分查找](https://leetcode.cn/problems/binary-search/description/)

Leetcode 题解跳转：[lc[704]. 二分查找（区间循环）｜写法1：左闭右闭式，写法2：左闭右开式](https://leetcode.cn/problems/binary-search/solutions/2750451/lc704-er-fen-cha-zhao-by-boyan-uni-u8q0)

<img src="https://cdn.jsdelivr.net/gh/boyan-uni/pic-bed/img/lc%5B704%5D.png" alt="image-20240420213049461" style="width:80%;" />

------

### 思路

- 方法1：**暴力解法**（直接遍历搜索）
  - 时间复杂度：O(n)，（看到就要条件反射的想，能否将时间复杂度降低到O(logn)？）
  - 空间复杂度: O(1)，原地算法；

- 方法2：**二分查找**

  - 时间复杂度：O(logn)；

  - 空间复杂度: O(1)，原地算法；

  - 两种写法：	

    - 写法1：左闭右闭式 区间循环，如：[ , ]

    - 写法2：左闭右开式 区间循环，如：[ , )

​    其实这道题是**标准的“二分查找”模型**，二分法的使用前提是：**有序数组**，这道题更标准在“数组中数据元素**不重复**”，也就是返回值下标**唯一**；

------

### 解题思路：“二分查找”

<img src="https://cdn.jsdelivr.net/gh/boyan-uni/pic-bed/img/lc704-%E4%B8%A4%E7%A7%8D%E5%8C%BA%E9%97%B4%E5%86%99%E6%B3%95.png" alt="image-20240422233916043" style="width:70%;" />

------

### Code

#### 写法1：左闭右闭 [,] 区间循环

```java
class Solution {
    // 左闭右闭式 区间循环  [,]
    public int search(int[] nums, int target) {
        // 提前做好边界判断，优化不必要的操作
        if (target < nums[0] || target > nums[nums.length - 1]) {
            return -1;
        }
        // 准备辅助变量
        int left = 0, right = nums.length - 1;
        int mid = left + ((right - left) >> 1);
                // 1) >>（位运算）速度快于 /2（除法）；
                // 2）防溢出
        // 二分查找，区间循环
        while (left <= right) {
            if (nums[mid] == target) {                  // 1) 先判断 == 的情况，nums[mid] != target 则跳到其他 else 分支；
                return mid;
            } else if (target < nums[mid]) {            // 2) 左子区间（缩小区间、移动指针）
                right = mid - 1;
                mid = left + ((right - left) >> 1); 
            } else {                                    // 3）右子区间（缩小区间、移动指针）
                left = mid + 1;
                mid = left + ((right - left) >> 1); 
            }
        }
        // 如果查找失败
        return -1;
    }
}

作者：BOYAN
链接：https://leetcode.cn/problems/binary-search/solutions/2750451/lc704-er-fen-cha-zhao-by-boyan-uni-u8q0/
来源：力扣（LeetCode）
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。
```



1. 好习惯：提前做好边界判断，以优化掉不必要的操作；
2. Java支持一句语句中生命多个同类变量；
3. mid = left + ((right - left) >> 1);
   - \>>（位运算）**速度快**于 /2（除法）；
   - **防溢出**：如果用(left + right)，当数据量过大时会更容易溢出；



#### 写法2：左闭右开 [,) 区间循环

```java
class Solution {
    // 左闭右开式 区间循环 [,)
    public int search(int[] nums, int target) {
        // 提前预判断，优化不必要的操作
        if (target < nums[0] || target > nums[nums.length - 1]) {
            return -1;
        }
        // 准备辅助变量
        int left = 0, right = nums.length;
        int mid = left + ((right - left) >> 1);
                // 1) >>位运算速度快于/2；
                // 2）防溢出
        // 二分查找，区间循环: 缩小区间、移动指针
        while (left < right) {
            if (nums[mid] == target) {                  // 1) 先判断 == 的情况，nums[mid] != target 则跳到其他 else 分支；
                return mid;
            } else if (target < nums[mid]) {            // 2) 左子区间
                right = mid;
                mid = left + ((right - left) >> 1); 
            } else {                                    // 3）右子区间
                left = mid + 1;
                mid = left + ((right - left) >> 1); 
            }
        }
        // 如果查找失败
        return -1;
    }
}

作者：BOYAN
链接：https://leetcode.cn/problems/binary-search/solutions/2750451/lc704-er-fen-cha-zhao-by-boyan-uni-u8q0/
来源：力扣（LeetCode）
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。
```































































